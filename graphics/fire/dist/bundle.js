!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"runFire",(function(){return p}));const r=document.getElementById("fire").getContext("2d"),n=r.createImageData(1500,400),s=document.getElementById("fps"),a=document.getElementById("selectedOption"),o=new class{constructor(){this.width=1500,this.height=400,this.fire=new Uint8Array(this.width*this.height*4).fill(0)}updateScreen(){for(let t=0;t<this.width;t++){const e=this.width*(this.height-2)+t<<2;this.fire[e]=Math.floor(255*Math.random()),this.fire[e+1]=0,this.fire[e+2]=0,this.fire[e+3]=255}for(let t=0;t<this.height-1;t++)for(let e=0;e<this.width;e++){const i=t*this.width+e<<2,r=(t+1)*this.width+(e-1+this.width)%this.width<<2,n=(t+1)*this.width+(e+this.width)%this.width<<2,s=(t+1)*this.width+(e+1+this.width)%this.width<<2,a=(t+2)*this.width+(e+this.width)%this.width<<2;this.fire[i]=Math.floor((this.fire[r]+this.fire[n]+this.fire[s]+this.fire[a])/4.01),this.fire[i+1]=0,this.fire[i+2]=0,this.fire[i+3]=255}}getFire(){return this.fire}clear(){this.fire=new Uint8Array(this.width*this.height*4).fill(0)}};let h,f,c,u,l=0,d=0,w=0;const m=()=>{a.value!==c&&(f&&f.clear(),f="Javascript"===a.value?o:h.instance.exports,c=a.value),setTimeout(m,0),f.updateScreen();const t="Javascript"===a.value?f.getFire():u;n.data.set(t),r.putImageData(n,0,0),(()=>{const t=performance.now();l+=1,d>=1e3?(s.innerHTML=Math.floor(1e3*l/d),l=0,d=0):d+=t-w,w=t})()},p=async()=>{await(async()=>{const t={env:{abort(t,e,i,r){console.error(`Abort called at ${e}:${i}:${r}`)},seed:()=>1e64*Math.random()}};try{const e=fetch("build/optimized.wasm");h="function"==typeof WebAssembly.instantiateStreaming?await WebAssembly.instantiateStreaming(e,t):await WebAssembly.instantiate(await(await e).arrayBuffer(),t);const{memory:i,getDataBuffer:r}=h.instance.exports,n=r();u=new Uint8Array(i.buffer,n,24e5)}catch(t){console.error("Can't instantiate WebAssembly module.\n",t)}})(),h&&m()};p()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vanMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZXh0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJpbWdEYXRhIiwiY3JlYXRlSW1hZ2VEYXRhIiwiZnBzRWxlbWVudCIsImZpcmVFZmZlY3RKcyIsInRoaXMiLCJ3aWR0aCIsImhlaWdodCIsImZpcmUiLCJVaW50OEFycmF5IiwiZmlsbCIsImluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaiIsImJvdHRvbUxlZnQiLCJib3R0b20iLCJib3R0b21SaWdodCIsImJvdHRvbURvd24iLCJ3YXNtSW5zdGFuY2UiLCJmaXJlRWZmZWN0IiwibGFzdE9wdGlvbiIsIndhc21CeXRlTWVtb3J5QXJyYXkiLCJmcHMiLCJhY2NUaW1lIiwibGFzdFRpbWUiLCJhbmltYXRlIiwiY2xlYXIiLCJpbnN0YW5jZSIsInNldFRpbWVvdXQiLCJ1cGRhdGVTY3JlZW4iLCJnZXRGaXJlIiwiZGF0YSIsInNldCIsInB1dEltYWdlRGF0YSIsIm5vdyIsInBlcmZvcm1hbmNlIiwiaW5uZXJIVE1MIiwidXBkYXRlRlBTIiwicnVuRmlyZSIsImFzeW5jIiwiaW1wb3J0cyIsImVudiIsIl9tc2ciLCJfZmlsZSIsImxpbmUiLCJjb2x1bW4iLCJjb25zb2xlIiwiZXJyb3IiLCJzZWVkIiwicmVzcG9uc2UiLCJmZXRjaCIsIldlYkFzc2VtYmx5IiwiaW5zdGFudGlhdGVTdHJlYW1pbmciLCJpbnN0YW50aWF0ZSIsImFycmF5QnVmZmVyIiwibWVtb3J5IiwiZ2V0RGF0YUJ1ZmZlciIsIm9mZnNldCIsImJ1ZmZlciIsImUiLCJmZXRjaFdhc20iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksSUFJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEcsOEVDaEZyRCxNQUNNQyxFQURTQyxTQUFTQyxlQUFlLFFBQ2hCQyxXQUFXLE1BRzVCQyxFQUFVSixFQUFRSyxnQkFGVixLQUNDLEtBRVRDLEVBQWFMLFNBQVNDLGVBQWUsT0FDckMsRUFBU0QsU0FBU0MsZUFBZSxrQkFDakNLLEVBQWUsSUNUZCxNQUNMLGNBQ0VDLEtBQUtDLE1BQVEsS0FDYkQsS0FBS0UsT0FBUyxJQUNkRixLQUFLRyxLQUFPLElBQUlDLFdBQVdKLEtBQUtDLE1BQVFELEtBQUtFLE9BQVMsR0FBR0csS0FBSyxHQUdoRSxlQUNFLElBQUssSUFBSTdDLEVBQUksRUFBR0EsRUFBSXdDLEtBQUtDLE1BQU96QyxJQUFLLENBRW5DLE1BQU04QyxFQUFTTixLQUFLQyxPQUFTRCxLQUFLRSxPQUFTLEdBQUsxQyxHQUFNLEVBRXREd0MsS0FBS0csS0FBS0csR0FBU0MsS0FBS0MsTUFBc0IsSUFBaEJELEtBQUtFLFVBQ25DVCxLQUFLRyxLQUFLRyxFQUFRLEdBQUssRUFDdkJOLEtBQUtHLEtBQUtHLEVBQVEsR0FBSyxFQUN2Qk4sS0FBS0csS0FBS0csRUFBUSxHQUFLLElBR3pCLElBQUssSUFBSTlDLEVBQUksRUFBR0EsRUFBSXdDLEtBQUtFLE9BQVMsRUFBRzFDLElBQ25DLElBQUssSUFBSWtELEVBQUksRUFBR0EsRUFBSVYsS0FBS0MsTUFBT1MsSUFBSyxDQUNuQyxNQUFNSixFQUFTOUMsRUFBSXdDLEtBQUtDLE1BQVFTLEdBQU0sRUFDaENDLEdBQWVuRCxFQUFJLEdBQUt3QyxLQUFLQyxPQUFVUyxFQUFJLEVBQUlWLEtBQUtDLE9BQVNELEtBQUtDLE9BQVcsRUFDN0VXLEdBQVdwRCxFQUFJLEdBQUt3QyxLQUFLQyxPQUFVUyxFQUFJVixLQUFLQyxPQUFTRCxLQUFLQyxPQUFXLEVBQ3JFWSxHQUFnQnJELEVBQUksR0FBS3dDLEtBQUtDLE9BQVVTLEVBQUksRUFBSVYsS0FBS0MsT0FBU0QsS0FBS0MsT0FBVyxFQUM5RWEsR0FBZXRELEVBQUksR0FBS3dDLEtBQUtDLE9BQVVTLEVBQUlWLEtBQUtDLE9BQVNELEtBQUtDLE9BQVcsRUFFL0VELEtBQUtHLEtBQUtHLEdBQVNDLEtBQUtDLE9BQ3JCUixLQUFLRyxLQUFLUSxHQUNUWCxLQUFLRyxLQUFLUyxHQUNWWixLQUFLRyxLQUFLVSxHQUNWYixLQUFLRyxLQUFLVyxJQUNWLE1BRUpkLEtBQUtHLEtBQUtHLEVBQVEsR0FBSyxFQUN2Qk4sS0FBS0csS0FBS0csRUFBUSxHQUFLLEVBQ3ZCTixLQUFLRyxLQUFLRyxFQUFRLEdBQUssS0FLN0IsVUFDRSxPQUFPTixLQUFLRyxLQUdkLFFBQ0VILEtBQUtHLEtBQU8sSUFBSUMsV0FBV0osS0FBS0MsTUFBUUQsS0FBS0UsT0FBUyxHQUFHRyxLQUFLLEtEbkNsRSxJQUFJVSxFQUNBQyxFQUNBQyxFQUVBQyxFQUNBQyxFQUFNLEVBQ05DLEVBQVUsRUFDVkMsRUFBVyxFQUVmLE1BeUNNQyxFQUFVLEtBQ1YsRUFBTzdDLFFBQVV3QyxJQUNmRCxHQUNGQSxFQUFXTyxRQUViUCxFQUE4QixlQUFqQixFQUFPdkMsTUFBeUJzQixFQUFlZ0IsRUFBYVMsU0FBU2xFLFFBQ2xGMkQsRUFBYSxFQUFPeEMsT0FHdEJnRCxXQUFXSCxFQUFTLEdBRXBCTixFQUFXVSxlQUNYLE1BQU12QixFQUF3QixlQUFqQixFQUFPMUIsTUFBeUJ1QyxFQUFXVyxVQUFZVCxFQUNwRXRCLEVBQVFnQyxLQUFLQyxJQUFJMUIsR0FDakJYLEVBQVFzQyxhQUFhbEMsRUFBUyxFQUFHLEdBM0JqQixNQUNoQixNQUFNbUMsRUFBTUMsWUFBWUQsTUFDeEJaLEdBQU8sRUFDSEMsR0FBVyxLQUNidEIsRUFBV21DLFVBQVkxQixLQUFLQyxNQUFPLElBQU9XLEVBQU9DLEdBQ2pERCxFQUFNLEVBQ05DLEVBQVUsR0FFVkEsR0FBV1csRUFBTVYsRUFFbkJBLEVBQVdVLEdBbUJYRyxJQUdXQyxFQUFVQyxlQTVETEEsV0FDaEIsTUFBTUMsRUFBVSxDQUNkQyxJQUFLLENBQ0gsTUFBTUMsRUFBTUMsRUFBT0MsRUFBTUMsR0FDdkJDLFFBQVFDLE1BQU0sbUJBQW1CSixLQUFTQyxLQUFRQyxNQUVwREcsS0FBSSxJQUNxQixLQUFoQnRDLEtBQUtFLFdBTWxCLElBQ0UsTUFBTXFDLEVBQVdDLE1BQU0sd0JBRXJCaEMsRUFEOEMsbUJBQXJDaUMsWUFBWUMsMkJBQ0FELFlBQVlDLHFCQUFxQkgsRUFBVVQsU0FFM0NXLFlBQVlFLHdCQUF5QkosR0FBVUssY0FBZWQsR0FFckYsTUFBTSxPQUFFZSxFQUFNLGNBQUVDLEdBQWtCdEMsRUFBYVMsU0FBU2xFLFFBQ2xEZ0csRUFBU0QsSUFDZm5DLEVBQXNCLElBQUlkLFdBQVdnRCxFQUFPRyxPQUFRRCxFQUFRcEQsTUFDNUQsTUFBT3NELEdBQ1BiLFFBQVFDLE1BQU0sMENBQTJDWSxLQXFDckRDLEdBQ0QxQyxHQUlMTyxLQUdGYSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgRmlyZUVmZmVjdCB9IGZyb20gJy4vanMnXG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXJlJylcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuY29uc3Qgd2lkdGggPSAxNTAwXG5jb25zdCBoZWlnaHQgPSA0MDBcbmNvbnN0IGltZ0RhdGEgPSBjb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KVxuY29uc3QgZnBzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcHMnKVxuY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkT3B0aW9uJylcbmNvbnN0IGZpcmVFZmZlY3RKcyA9IG5ldyBGaXJlRWZmZWN0KClcbmxldCB3YXNtSW5zdGFuY2VcbmxldCBmaXJlRWZmZWN0XG5sZXQgbGFzdE9wdGlvblxubGV0IG1lbW9yeVxubGV0IHdhc21CeXRlTWVtb3J5QXJyYXlcbmxldCBmcHMgPSAwXG5sZXQgYWNjVGltZSA9IDBcbmxldCBsYXN0VGltZSA9IDBcblxuY29uc3QgZmV0Y2hXYXNtID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBpbXBvcnRzID0ge1xuICAgIGVudjoge1xuICAgICAgYWJvcnQoX21zZywgX2ZpbGUsIGxpbmUsIGNvbHVtbikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBBYm9ydCBjYWxsZWQgYXQgJHtfZmlsZX06JHtsaW5lfToke2NvbHVtbn1gKVxuICAgICAgfSxcbiAgICAgIHNlZWQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogMWU2NFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEluc3RhbnRpYXRlIHdhc20gbW9kdWxlXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBmZXRjaCgnYnVpbGQvb3B0aW1pemVkLndhc20nKVxuICAgIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHdhc21JbnN0YW5jZSA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHJlc3BvbnNlLCBpbXBvcnRzKVxuICAgIH0gZWxzZSB7XG4gICAgICB3YXNtSW5zdGFuY2UgPSBhd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShhd2FpdCAoYXdhaXQgcmVzcG9uc2UpLmFycmF5QnVmZmVyKCksIGltcG9ydHMpXG4gICAgfVxuICAgIGNvbnN0IHsgbWVtb3J5LCBnZXREYXRhQnVmZmVyIH0gPSB3YXNtSW5zdGFuY2UuaW5zdGFuY2UuZXhwb3J0c1xuICAgIGNvbnN0IG9mZnNldCA9IGdldERhdGFCdWZmZXIoKVxuICAgIHdhc21CeXRlTWVtb3J5QXJyYXkgPSBuZXcgVWludDhBcnJheShtZW1vcnkuYnVmZmVyLCBvZmZzZXQsIGhlaWdodCAqIHdpZHRoICogNClcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYENhbid0IGluc3RhbnRpYXRlIFdlYkFzc2VtYmx5IG1vZHVsZS5cXG5gLCBlKVxuICB9XG59XG5cbmNvbnN0IHVwZGF0ZUZQUyA9ICgpID0+IHtcbiAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KClcbiAgZnBzICs9IDFcbiAgaWYgKGFjY1RpbWUgPj0gMTAwMCkge1xuICAgIGZwc0VsZW1lbnQuaW5uZXJIVE1MID0gTWF0aC5mbG9vcigoMTAwMCAqIGZwcykgLyBhY2NUaW1lKVxuICAgIGZwcyA9IDBcbiAgICBhY2NUaW1lID0gMFxuICB9IGVsc2Uge1xuICAgIGFjY1RpbWUgKz0gbm93IC0gbGFzdFRpbWVcbiAgfVxuICBsYXN0VGltZSA9IG5vd1xufVxuXG5jb25zdCBhbmltYXRlID0gKCkgPT4ge1xuICBpZiAob3B0aW9uLnZhbHVlICE9PSBsYXN0T3B0aW9uKSB7XG4gICAgaWYgKGZpcmVFZmZlY3QpIHtcbiAgICAgIGZpcmVFZmZlY3QuY2xlYXIoKVxuICAgIH1cbiAgICBmaXJlRWZmZWN0ID0gb3B0aW9uLnZhbHVlID09PSAnSmF2YXNjcmlwdCcgPyBmaXJlRWZmZWN0SnMgOiB3YXNtSW5zdGFuY2UuaW5zdGFuY2UuZXhwb3J0c1xuICAgIGxhc3RPcHRpb24gPSBvcHRpb24udmFsdWVcbiAgfVxuXG4gIHNldFRpbWVvdXQoYW5pbWF0ZSwgMClcblxuICBmaXJlRWZmZWN0LnVwZGF0ZVNjcmVlbigpXG4gIGNvbnN0IGZpcmUgPSBvcHRpb24udmFsdWUgPT09ICdKYXZhc2NyaXB0JyA/IGZpcmVFZmZlY3QuZ2V0RmlyZSgpIDogd2FzbUJ5dGVNZW1vcnlBcnJheVxuICBpbWdEYXRhLmRhdGEuc2V0KGZpcmUpXG4gIGNvbnRleHQucHV0SW1hZ2VEYXRhKGltZ0RhdGEsIDAsIDApXG5cbiAgdXBkYXRlRlBTKClcbn1cblxuZXhwb3J0IGNvbnN0IHJ1bkZpcmUgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IGZldGNoV2FzbSgpXG4gIGlmICghd2FzbUluc3RhbmNlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBhbmltYXRlKClcbn1cblxucnVuRmlyZSgpXG4iLCJleHBvcnQgY2xhc3MgRmlyZUVmZmVjdCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMud2lkdGggPSAxNTAwXG4gICAgdGhpcy5oZWlnaHQgPSA0MDBcbiAgICB0aGlzLmZpcmUgPSBuZXcgVWludDhBcnJheSh0aGlzLndpZHRoICogdGhpcy5oZWlnaHQgKiA0KS5maWxsKDApXG4gIH1cblxuICB1cGRhdGVTY3JlZW4oKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLndpZHRoOyBpKyspIHtcbiAgICAgIC8vIHJhbmRvbWl6ZSB0aGUgMm5kIHJvdyBmcm9tIHRoZSBib3R0b21cbiAgICAgIGNvbnN0IGluZGV4ID0gKHRoaXMud2lkdGggKiAodGhpcy5oZWlnaHQgLSAyKSArIGkpIDw8IDJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4KVxuICAgICAgdGhpcy5maXJlW2luZGV4XSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSlcbiAgICAgIHRoaXMuZmlyZVtpbmRleCArIDFdID0gMFxuICAgICAgdGhpcy5maXJlW2luZGV4ICsgMl0gPSAwXG4gICAgICB0aGlzLmZpcmVbaW5kZXggKyAzXSA9IDI1NVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oZWlnaHQgLSAxOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy53aWR0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gKGkgKiB0aGlzLndpZHRoICsgaikgPDwgMiAvLyBjb252ZXJ0IHRoZSBqIGFuZCBpIGNvb3JkaW5hdGVzIHRvIHRoZSBhcnJheSBpbmRleFxuICAgICAgICBjb25zdCBib3R0b21MZWZ0ID0gKChpICsgMSkgKiB0aGlzLndpZHRoICsgKChqIC0gMSArIHRoaXMud2lkdGgpICUgdGhpcy53aWR0aCkpIDw8IDJcbiAgICAgICAgY29uc3QgYm90dG9tID0gKChpICsgMSkgKiB0aGlzLndpZHRoICsgKChqICsgdGhpcy53aWR0aCkgJSB0aGlzLndpZHRoKSkgPDwgMlxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9ICgoaSArIDEpICogdGhpcy53aWR0aCArICgoaiArIDEgKyB0aGlzLndpZHRoKSAlIHRoaXMud2lkdGgpKSA8PCAyXG4gICAgICAgIGNvbnN0IGJvdHRvbURvd24gPSAoKGkgKyAyKSAqIHRoaXMud2lkdGggKyAoKGogKyB0aGlzLndpZHRoKSAlIHRoaXMud2lkdGgpKSA8PCAyXG5cbiAgICAgICAgdGhpcy5maXJlW2luZGV4XSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgKHRoaXMuZmlyZVtib3R0b21MZWZ0XSArXG4gICAgICAgICAgICB0aGlzLmZpcmVbYm90dG9tXSArXG4gICAgICAgICAgICB0aGlzLmZpcmVbYm90dG9tUmlnaHRdICtcbiAgICAgICAgICAgIHRoaXMuZmlyZVtib3R0b21Eb3duXSkgL1xuICAgICAgICAgICAgNC4wMVxuICAgICAgICApXG4gICAgICAgIHRoaXMuZmlyZVtpbmRleCArIDFdID0gMFxuICAgICAgICB0aGlzLmZpcmVbaW5kZXggKyAyXSA9IDBcbiAgICAgICAgdGhpcy5maXJlW2luZGV4ICsgM10gPSAyNTVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRGaXJlKCkge1xuICAgIHJldHVybiB0aGlzLmZpcmVcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuZmlyZSA9IG5ldyBVaW50OEFycmF5KHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCAqIDQpLmZpbGwoMClcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==